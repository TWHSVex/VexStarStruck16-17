#pragma config(Sensor, dgtl1,  frontRight,     sensorQuadEncoder)
#pragma config(Sensor, dgtl3,  frontLeft,      sensorQuadEncoder)
#pragma config(Sensor, dgtl5,  backRight,      sensorQuadEncoder)
#pragma config(Sensor, dgtl7,  backLeft,       sensorQuadEncoder)
#pragma config(Motor,  port2,           frontRight,    tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port3,           frontLeft,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port4,           backRight,     tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port5,           backLeft,      tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port6,           cTopRight,     tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port7,           cTopLeft,      tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port8,           cMiddle,       tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port9,           cBottom,       tmotorVex393_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

 #pragma platform(VEX)
#define C1LX vexRT[Ch4]
#define C1LY vexRT[Ch3]
#define C1RX vexRT[Ch1]
//Competition Control and Duration Settings
#pragma competitionControl(Competition)
#pragma autonomousDuration(20)
#pragma userControlDuration(120)

#include "Vex_Competition_Includes.c"   //Main competition background code...do not modify!

/////////////////////////////////////////////////////////////////////////////////////////
//
//                          Pre-Autonomous Functions
//
// You may want to perform some actions before the competition starts. Do them in the
// following function.
//
/////////////////////////////////////////////////////////////////////////////////////////

void pre_auton()
{
  // Set bStopTasksBetweenModes to false if you want to keep user created tasks running between
  // Autonomous and Tele-Op modes. You will need to manage all user created tasks if set to false.
  bStopTasksBetweenModes = true;

	// All activities that occur before the competition starts
	// Example: clearing encoders, setting servo positions, ...
}

/////////////////////////////////////////////////////////////////////////////////////////
//
//                                 Autonomous Task
//
// This task is used to control your robot during the autonomous phase of a VEX Competition.
// You must modify the code to add your own robot specific commands here.
//
/////////////////////////////////////////////////////////////////////////////////////////

task autonomous()
{
  // .....................................................................................
  // Insert user code here.
  // .....................................................................................

	AutonomousCodePlaceholderForTesting();  // Remove this function call once you have "real" code.
}

/*void fo()
{


	float speedfl = SensorValue[frontLeft]/time1[T1];
	float speedfr = SensorValue[frontRight]/time1[T1];
	float speedbl = SensorValue[backLeft]/time1[T1];
	float speedbr = SensorValue[backRight]/time1[T1];


}*/



float smallest()
{
	SensorValue[frontLeft] = 0;
	SensorValue[frontRight] = 0;
	SensorValue[backLeft] = 0;
	SensorValue[backRight] = 0;
	float time = 6;
	wait1Msec(time);
	float speedfl = SensorValue[frontLeft]/time;
	float speedfr = SensorValue[frontRight]/time;
	float speedbl = SensorValue[backLeft]/time;
	float speedbr = SensorValue[backRight]/time;
	float test[4] = {speedfl, speedfr, speedbl, speedbr};
	int smallest = speedfl;
	for(int i = 1; i < 4; i++){
		if(smallest > test[i]){
			smallest = test[i];
		}
	}
	return smallest;
}

void shaftSpeedFL()
{
	SensorValue[frontLeft] = 0;
	float time = 6;
	wait1Msec(time);
	float speedfl = SensorValue[frontLeft]/time;
	float small = smallest();
	while (speedfl<small)
	{
		 motor[frontLeft]= motor[frontLeft]-1;
	}
}

void shaftSpeedFR()
{
	SensorValue[frontRight] = 0;
	float time = 6;
	wait1Msec(time);
	float speedfl = SensorValue[frontRight]/time;
	float small = smallest();
	while (speedfl<small)
	{
		 motor[frontRight]= motor[frontRight]-1;
	}
}

void shaftSpeedBR()
{
	SensorValue[backRight] = 0;
	float time = 6;
	wait1Msec(time);
	float speedfl = SensorValue[backRight]/time;
	float small = smallest();
	while (speedfl<small)
	{
		 motor[backRight]= motor[backRight]-1;
	}
}

void shaftSpeedBL()
{
	SensorValue[backLeft] = 0;
	float time = 6;
	wait1Msec(time);
	float speedfl = SensorValue[backLeft]/time;
	float small = smallest();
	while (speedfl<small)
	{
		 motor[backLeft]= motor[backLeft]-1;
	}
}


void rotateR(){
	motor[frontRight]= 128;
	motor[frontLeft]=-128;
	motor[backRight]=128;
	motor[backLeft]=-128;
}

void rotateL(){
	motor[frontRight]= -128;
	motor[frontLeft]=128;
	motor[backRight]=-128;
	motor[backLeft]=128;
}

task usercontrol()
{

	clearTimer(T1);
	SensorValue[frontLeft]=0;
	SensorValue[frontRight]=0;
	SensorValue[backLeft]=0;
	SensorValue[backRight]=0;

	while (true)
	{

			//Forwards and Backwords
				motor[frontRight]=-vexRT[Ch1]+vexRT[Ch4]+vexRT[Ch3];
				motor[frontLeft]=vexRT[Ch1]+vexRT[Ch4]+vexRT[Ch3];
				motor[backLeft]=-vexRT[Ch1]-vexRT[Ch4]+vexRT[Ch3];
				motor[backRight]=vexRT[Ch1]+vexRT[Ch4]+vexRT[Ch3];
				if(vexRT[Btn5D]==1)
				{
					motor[cTopRight]=128;
					motor[cTopLeft]=128;
					motor[cMiddle]=128;
					motor[cBottom]=128;
				}
				if (vexRT[Ch1]!=0 && vexRT[Ch2]!=0)
				{
					shaftSpeedBL();
					shaftSpeedBR();
					shaftSpeedFL();
					shaftSpeedFR();
				}


				if(vexRT[Btn5D]==1){
					rotateR();
				}
				if(vexRT[Btn6D]==1){
					rotateL();
				}

 // Remove this function call once you have "real" code.
	}
}
/*Tonight I'm gonna have myself a real good time
I feel alive and the world I'll turn it inside out - yeah
And floating around in ecstasy
So don't stop me now don't stop me
'Cause I'm having a good time having a good time
I'm a shooting star leaping through the sky
Like a tiger defying the laws of gravity
I'm a racing car passing by like Lady Godiva
I'm gonna go go go
There's no stopping me
I'm burnin' through the sky yeah
Two hundred degrees
That's why they call me Mister Fahrenheit
I'm trav'ling at the speed of light
I wanna make a supersonic man out of you
Don't stop me now I'm having such a good time
I'm having a ball
Don't stop me now
If you wanna have a good time just give me a call
Don't stop me now ('Cause I'm having a good time)
Don't stop me now (Yes I'm havin' a good time)
I don't want to stop at all
Yeah, I'm a rocket ship on my way to Mars
On a collision course
I am a satellite I'm out of control
I am a sex machine ready to reload
Like an atom bomb about to
Oh oh oh oh oh explode
I'm burnin' through the sky yeah
Two hundred degrees
That's why they call me Mister Fahrenheit
I'm trav'ling at the speed of light
I wanna make a supersonic woman of you
Don't stop me don't stop me
Don't stop me hey hey hey
Don't stop me don't stop me
Ooh ooh ooh, I like it
Don't stop me don't stop me
Have a good time good time
Don't stop me don't stop me ah
Oh yeah
Alright
Oh, I'm burnin' through the sky yeah
Two hundred degrees
That's why they call me Mister Fahrenheit
I'm trav'ling at the speed of light
I wanna make a supersonic man out of you
Don't stop me now I'm having such a good time
I'm having a ball
Don't stop me now
If you wanna have a good time (wooh)
Just give me a call (alright)
Don't stop me now ('cause I'm having a good time - yeah yeah)
Don't stop me now (yes I'm havin' a good time)
I don't want to stop at all
La da da da daah
Da da da haa
Ha da da ha ha haaa
Ha da daa ha da da aaa
Ooh ooh ooh*/
